kind: Deployment
apiVersion: apps/v1
metadata:
  name: alpine-ovn
  labels:
    dce.daocloud.io/component: alpine-ovn
    dce.daocloud.io/app: crossx-ovn
  namespace: dev-env
  annotations: {}
spec:
  template:
    spec:
      dnsPolicy: ClusterFirst
      containers:
        - securityContext:
            privileged: true
          name: alpine-ovn
          image: 'registry.cn-hangzhou.aliyuncs.com/sourcegarden/openvpn:alpine-v1.0'
          env:
            - name: server_addr
              value: 123.57.3.122
          imagePullPolicy: Always
          terminationMessagePath: /dev/termination-log
          resources:
            requests:
              cpu: 500m
              memory: '100Mi'
            limits:
              cpu: 500m
              memory: '100Mi'
    metadata:
      labels:
        dce.daocloud.io/component: alpine-ovn
        dce.daocloud.io/app: crossx-ovn
      name: alpine-ovn
  selector:
    matchLabels:
      dce.daocloud.io/component: alpine-ovn
---
kind: Deployment
apiVersion: apps/v1
metadata:
  name: alpine-cross
  labels:
    dce.daocloud.io/component: alpine-cross
    dce.daocloud.io/app: crossx-ovn
  namespace: dev-env
  annotations: {}
spec:
  template:
    spec:
      dnsPolicy: ClusterFirst
      securityContext: {}
      containers:
        - name: alpine-cross
          image: 'registry.cn-hangzhou.aliyuncs.com/sourcegarden/frpc:alpine-v1.0'
          env:
            - name: remote_ip
              value: 123.57.3.122
            - name: service_name
              value: openvpn
            - name: position_note
              value: boe-uat-k8s
            - name: local_port
              value: '1194'
            - name: service_type
              value: tcp
          imagePullPolicy: Always
          resources:
            requests:
              cpu: 500m
              memory: '100Mi'
            limits:
              cpu: 500m
              memory: '100Mi'
    metadata:
      labels:
        dce.daocloud.io/component: alpine-cross
        dce.daocloud.io/app: crossx-ovn
      name: alpine-cross
  selector:
    matchLabels:
      dce.daocloud.io/component: alpine-cross
---
kind: Deployment
apiVersion: apps/v1
metadata:
  name: centos-ovn
  labels:
    dce.daocloud.io/component: centos-ovn
    dce.daocloud.io/app: crossx-ovn
  namespace: dev-env
  annotations: {}
spec:
  template:
    spec:
      dnsPolicy: ClusterFirst
      restartPolicy: Always
      containers:
        - securityContext:
            privileged: true
          name: centos-ovn
          image: 'registry.cn-hangzhou.aliyuncs.com/sourcegarden/openvpn:centos-v1.0'
          imagePullPolicy: Always
          resources:
            requests:
              cpu: 500m
              memory: '100Mi'
            limits:
              cpu: 500m
              memory: '100Mi'
    metadata:
      labels:
        dce.daocloud.io/component: centos-ovn
        dce.daocloud.io/app: crossx-ovn
      name: centos-ovn
  selector:
    matchLabels:
      dce.daocloud.io/component: centos-ovn
---
kind: Service
apiVersion: v1
metadata:
  name: alpine-ovn
  labels:
    dce.daocloud.io/app: crossx-ovn
  namespace: dev-env
  annotations: {}
spec:
  selector:
    dce.daocloud.io/component: alpine-ovn
    dce.daocloud.io/app: crossx-ovn
  type: ClusterIP
  ports:
    - targetPort: 1194
      protocol: TCP
      port: 1194
      name: alpine-ovn-1194
---
kind: Service
apiVersion: v1
metadata:
  name: centos-ovn
  labels:
    dce.daocloud.io/app: crossx-ovn
  namespace: dev-env
  annotations: {}
spec:
  selector:
    dce.daocloud.io/component: centos-ovn
    dce.daocloud.io/app: crossx-ovn
  type: ClusterIP
  ports:
    - targetPort: 1194
      protocol: TCP
      port: 1194
      name: centos-ovn-1194